name: Build Android APK

on:
  push:
    branches: [ "main", "master" ]

jobs:
  build:
    runs-on: ubuntu-22.04  # উবুন্টু ভার্সন নির্দিষ্ট করে দেওয়া হলো স্ট্যাবিলিটির জন্য

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Build with Buildozer
        uses: ArtemSBulgakov/buildozer-action@v1
        id: buildozer
        with:
          command: buildozer android debug
          buildozer_version: master
        env:
          # এই লাইনটি পাইথন এনভায়রনমেন্ট ত্রুটি সমাধান করবে
          PIP_BREAK_SYSTEM_PACKAGES: 1
          USER: root

      - name: Upload APK
        uses: actions/upload-artifact@v4
        with:
          name: package
          path: bin/*.apk
